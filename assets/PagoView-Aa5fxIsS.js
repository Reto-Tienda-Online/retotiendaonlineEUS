import{_ as S}from"./NavBarCesta-n0ML8zN8.js";import{y as g,o as a,c as o,n as _,u as z,j as O,r as i,k as T,i as x,z as $,d as u,h as B,b as e,F as y,m as N,t as r,g as d,f as I,A as V}from"./index-T2RBepq2.js";const L={},P={class:"mb-4 border-l-4 border-red-500 text-red-900 bg-red-100 rounded px-4 py-3"},j=_('<div class="flex items-start"><div class="py-1"><svg class="fill-current h-6 w-6 mr-4 text-red-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M0 10a10 10 0 1 1 20 0 10 10 0 0 1-20 0zm16.32-4.9L5.09 16.31A8 8 0 0 0 16.32 5.09zm-1.41-1.42A8 8 0 0 0 3.68 14.91L14.91 3.68z"></path></svg></div><div><h3 class="font-semibold">Ordainketa errorea</h3><p class="text-sm text-red-700">Ordainketa errore bat gertatu da</p></div></div>',1),M=[j];function E(h,n){return a(),o("div",P,M)}const F=g(L,[["render",E]]),C={},J={class:"mb-4 border-l-4 border-teal-500 text-teal-900 bg-teal-100 rounded px-4 py-3"},U=_('<div class="flex items-start"><div class="py-1"><svg class="fill-current h-6 w-6 mr-4 text-teal-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM6.7 9.29L9 11.6l4.3-4.3 1.4 1.42L9 14.4l-3.7-3.7 1.4-1.42z"></path></svg></div><div><h3 class="font-semibold">Ordainketa onartua</h3><p class="text-sm text-teal-700">Ordainketa ondo egin da.</p></div></div>',1),D=[U];function G(h,n){return a(),o("div",J,D)}const R=g(C,[["render",G]]),q={key:0,class:"flex flex-row justify-center mt-5"},H={key:1,class:"flex flex-row justify-center mt-5"},K={class:"text-white w-full h-full flex justify-center"},Y=_('<form class="flex flex-col w-[745px]"><h2 class="text-xl font-bold my-3">Fakturazio-helbidea</h2><div class="flex flex-row justify-between w-full"><input class="bg-[#272727] rounded-md w-full border-2 py-3 px-2 border-gray-400" type="text" placeholder="Nombre comleto"><input class="bg-[#272727] rounded-md w-full border-2 ml-4 py-3 px-2 border-gray-400" type="text" placeholder="Dirección de la facturación"></div><label class="text-xl font-bold my-3"> Herrialdea: <select class="bg-[#272727] rounded-md border-2 my-5 py-3 px-2 border-gray-400 w-full"><option>Singapore</option><option>Luxembourg</option><option>Italy</option><option>Germany</option><option>USA</option><option>Canada</option><option>Brazil</option><option>UAE</option></select></label><h2 class="text-xl font-bold my-3 focus">Ordainketa-metodoak</h2><div id="payment-method-93" class="rounded-md bg-[#272727] py-7 px-5"><div class="flex flex-row hover:border-resaltar active:border-resaltar focus:border-resaltar"><input type="radio" name="payment-platform" value="PAYPAL" class="hidden"><img class="rounded-lg w-22 h-20" src="https://brandemia.org/sites/default/files/sites/default/files/logo_paypal_principal.jpg" alt="Imagen de PayPal"><div class="flex flex-col mx-5"><span class="font-bold">Paypal<span class="text-gray-500">(+0.20€)</span></span><div class="paypal-agreement-container"><label class="checkbox"><input type="checkbox" name="paypal_save" checked="checked"><span class="checkmark"></span> Gorde zure hurrengo erosketarako </label></div></div></div></div></form>',1),Q={class:"w-[396px] mx-14"},W=_('<input id="pluginsdata" type="hidden" name="pluginsdata" value=""><input type="hidden" name="process" value="pay"><input type="hidden" name="usid" value="1a99ccc3ce502635ed64a38aeeda80291ca362ad7ea7db61f3a1ae74c85f18ea"><input type="hidden" name="ioBB" id="ioBB"><h2 class="text-xl font-bold my-3">Laburpena</h2>',5),X={class:""},Z={class:"bg-[#272727] py-8 px-7 rounded-lg"},ee={class:"games"},te={class:"flex flex-col"},se={class:"name"},ae=["title"],oe={class:"text-xs"},le=e("br",null,null,-1),ne={class:"text-[#aeaeae]"},ce=e("span",{class:"h-[0.5px] bg-gray-200 w-full"},null,-1),re={class:"bg-[#272727] py-8 px-8 my-7 rounded-lg"},ie=e("div",{class:"flex justify-between"},[e("span",null,"Transakzio-kostuak"),e("span",{class:"text-[#aeaeae]"},"0.20€")],-1),de={id:"ig-vat","data-rate":"21.00",class:"flex justify-between my-2"},pe=e("span",null,[d("IVA ("),e("span",null,"21.00"),d("%) :")],-1),ue={class:"text-[#aeaeae]"},_e={class:"flex justify-between font-bold text-xl my-4"},he=e("span",{class:"texttotal"},"Guztira",-1),fe={class:"subtotal"},me=e("button",{type:"submit",class:"button default"},"Ordaindu",-1),xe=[me],ve=e("label",{class:"text-xs text-gray-200 text-pretty"},[d(' "Ordaindu" sakatuz gero, '),e("a",{class:"underline",href:"/es/terminos-y-condiciones/",target:"_blank"},"términos y condiciones"),d(" onartu ditudala aitortzen dut>.")],-1),ye="tok_mastercard",ge=1.21,be={__name:"PagoMain",setup(h){const n=z();O();const p=i([]),l=i(null),v=i(0),f=i(0),m=i(0),b=()=>{let s=JSON.stringify({amount:Math.round(f.value*100),currency:"usd",token:ye}),c={method:"post",maxBodyLength:1/0,url:"http://85.50.79.98:8080/process-payment/",headers:{"Content-Type":"application/json"},data:s};x.request(c).then(t=>{console.log(JSON.stringify(t.data)),t.data.status==="success"&&w()}).catch(t=>{console.log(t),setTimeout(()=>{l.value=null,n.push("/")},3e3)})},w=()=>{const s=JSON.parse(localStorage.getItem("usuario")).id;console.log(s);let c={method:"post",maxBodyLength:1/0,url:`http://85.50.79.98:8080/process_transaction/${s}`,headers:{"Content-Type":"application/json"}};x.request(c).then(t=>{console.log(JSON.stringify(t.data)),t.data.result==="Transaction processed successfully"&&(l.value=!0),setTimeout(()=>{l.value=null,n.push("/")},3e3)}).catch(t=>{console.log(t),l.value=!1,setTimeout(()=>{l.value=null,n.push("/")},3e3)})},k=()=>{for(const s of p.value)console.log(s.cantidad),m.value+=parseFloat(s.producto.precio_unitario)*s.cantidad;v.value=m.value*.21},A=()=>{f.value=m.value*ge};return T(()=>{const c=`http://85.50.79.98:8080/carrocompra?id_usuario=${JSON.parse(localStorage.getItem("usuario")).id}`;x.get(c).then(t=>{p.value=t.data}).catch(t=>{console.error(t)})}),$(()=>{k(),A()}),(s,c)=>(a(),o(y,null,[l.value?(a(),o("div",q,[u(R)])):l.value===!1?(a(),o("div",H,[u(F)])):B("",!0),e("main",K,[Y,e("div",Q,[W,e("div",X,[e("div",Z,[e("div",ee,[(a(!0),o(y,null,N(p.value,(t,we)=>(a(),o("div",{key:t.producto.id,class:"flex justify-between"},[e("div",te,[e("span",se,[e("span",{title:t.producto.producto,class:"font-bold text-lg"},[d(r(t.producto.producto)+" ",1),I(e("span",{class:"text-resaltar"},"("+r(t.cantidad)+") ",513),[[V,t.cantidad>1]])],8,ae)]),e("span",oe,r(t.producto.plataforma.plataforma),1),le]),e("span",ne,r(t.producto.precio_unitario)+"€",1)]))),128)),ce])]),e("div",re,[ie,e("div",de,[pe,e("span",ue,[e("span",null,r(v.value.toFixed(2))+"€",1)])]),e("div",_e,[he,e("span",fe,r(f.value.toFixed(2))+"€",1)]),e("div",{onClick:b,class:"flex justify-center py-5 my-6 bg-resaltar rounded-lg hover:cursor-pointer"},xe)])]),ve])])],64))}},Se={__name:"PagoView",setup(h){return(n,p)=>(a(),o("div",null,[u(S,{activeElement:"Pago"}),u(be)]))}};export{Se as default};
