import{_ as N}from"./NavBarCesta-n0ML8zN8.js";import{u as $,j as V,r as g,k as E,i as f,l as F,a as O,o as l,c as i,F as I,m as J,b as t,g as x,t as r,h as B,n as v,d as h,f as D,p as T}from"./index-T2RBepq2.js";const U="/imgs/empty_shopcart.png",j={class:"flex xl:flex-row justify-center sm:flex-col w-full mt-10"},z={key:0,class:"flex flex-col gap-5"},L={class:"flex flex-row justify-around bg-[#1f1f1f] w-full px-5 py-5 rounded-xl"},M=["onClick"],q=["alt","src"],P={class:"flex flex-col text-md max-w-32"},R={class:"name"},A=t("div",{class:"platform platform-steam"},[t("div",{class:"icon-s icon-steam"})],-1),G={title:"New Cycle - Europe",class:"font-bold text-lg"},K={class:"text-sm text-gray-300"},W=["onClick"],H=t("div",{class:"moveToWishlist ml-2"},"Erosketako orga ezabatu",-1),Q={class:""},X={class:"price text-2xl"},Y={class:"text-xl font-bold my-3"},Z=["onUpdate:modelValue","onChange"],tt=v('<option value="0" disabled="disabled">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option>',11),et=[tt],ot={key:1},st=t("h1",{class:"text-xl text-white text-center"}," Erosketako orga hutsik dago ",-1),at=t("picture",null,[t("img",{src:U,class:"max-w-96"})],-1),nt=t("h1",{class:"text-xl text-white text-center"}," Ez galdu denbora, erosi orain ",-1),lt=[st,at,nt],it={key:2,class:"flex flex-col"},ct={class:"text-white w-[395px] mx-4"},rt={class:"flex flex-col justify-center w-full bg-[#1f1f1f] px-5 py-5 rounded-xl"},dt={class:"flex justify-between"},pt=t("span",null,"Prezioa",-1),ut={class:"flex justify-between font-bold text-2xl my-3"},_t=t("span",null,"Subtotala",-1),ft=v('<div class="flex flex-row items-center justify-center"><span class="h-[0.5px] w-full bg-gray-300"></span><span class="flex justify-center my-3 text-gray-300">o</span><span class="h-[0.5px] w-full bg-gray-300"></span></div><a href="/" class="flex justify-center text-md text-gray-300"> Ordainketarekin jarraitu </a>',2),xt={__name:"CestaMain",setup(y){const u=$(),_=V(),n=g([]),c=g(0),b=e=>{console.log(e),_.commit("setJuegoDetalle",e),u.push("/juegoDetalle")},w=e=>`/imgs/juegos/${e}/2.webp`,m=()=>{c.value=0;for(const e of n.value){const a=e.producto;e.cantidad?c.value+=parseFloat(a.precio_unitario)*e.cantidad:c.value+=parseFloat(a.precio_unitario)}},k=()=>{u.push("/pago")},C=e=>{const a={method:"delete",maxBodyLength:1/0,url:`http://85.50.79.98:8080/carrocompra/${e}`,headers:{}};f.request(a).then(o=>{console.log(JSON.stringify(o.data))}).catch(o=>{console.log(o)}),_.commit("deleteItem",e),localStorage.removeItem("shopcart"),n.value=n.value.filter(o=>o.id!==e)},S=e=>{const a=JSON.parse(localStorage.getItem("usuario")).id;let o=JSON.stringify({id_usuario:a,id_producto:e.producto.id,pagado:!1,cantidad:e.cantidad}),s={method:"put",maxBodyLength:1/0,url:`http://85.50.79.98:8080/carrocompra/${e.id}`,headers:{accept:"application/json","Content-Type":"application/json"},data:o};f.request(s).then(d=>{console.log(JSON.stringify(d.data))}).catch(d=>{console.log(d)})};return E(()=>{const a=`http://85.50.79.98:8080/carrocompra?id_usuario=${JSON.parse(localStorage.getItem("usuario")).id}`;f.get(a).then(o=>{n.value=o.data}).catch(o=>{console.error(o)}),m()}),F(n,()=>{m()},{deep:!0}),(e,a)=>{const o=O("font-awesome-icon");return l(),i("main",j,[n.value.length>0?(l(),i("div",z,[(l(!0),i(I,null,J(n.value,(s,d)=>(l(),i("div",{key:s.id,class:"text-white w-[745px] mx-4"},[t("div",L,[t("div",{class:"cover",onClick:p=>b(s.producto)},[t("picture",null,[t("img",{alt:s.producto.producto,src:w(s.producto.id),loading:"lazy",class:"rounded-xl max-w-96 hover:cursor-pointer"},null,8,q)])],8,M),t("div",P,[t("div",R,[A,t("span",G,r(s.producto.producto),1)]),t("div",K,r(s.producto.plataforma.plataforma),1),t("div",{class:"text-sm py-6 text-gray-300 flex flex-row hover:underline cursor-pointer",onClick:p=>C(s.id)},[t("div",null,[h(o,{icon:"trash"})]),H],8,W),t("div",Q,[t("div",X,r(s.producto.precio_unitario)+"€ ",1),t("label",Y,[x(" Kantitatea: "),D(t("select",{class:"w-full mt-5 bg-gray-50 py-1 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500","data-max":"10","onUpdate:modelValue":p=>s.cantidad=p,onChange:p=>S(s)},et,40,Z),[[T,s.cantidad]])])])])])]))),128))])):(l(),i("div",ot,lt)),n.value.length>0?(l(),i("div",it,[t("div",ct,[t("div",rt,[t("div",dt,[pt,x(),t("span",null,r(c.value.toFixed(2))+"€",1)]),t("div",ut,[_t,x(),t("span",null,r(c.value.toFixed(2))+"€",1)]),t("button",{onClick:k,class:"bg-resaltar flex justify-center rounded-lg px-2 py-4 my-5 font-bold"}," Ordainketa egin "),ft])])])):B("",!0)])}}},gt={__name:"CestaView",setup(y){return(u,_)=>(l(),i("div",null,[h(N,{activeElement:"Cesta"}),h(xt)]))}};export{gt as default};
