import{N as p}from"./AdminNavBar-jw3LCUVj.js";import{y as m,i as _,a as u,o as i,c as d,b as t,f as g,v as f,d as o,t as n,F as y,m as w}from"./index-T2RBepq2.js";const b={data(){return{compras:[],currentPage:1,comprasPerPage:6,searchQuery:""}},computed:{totalPages(){return Math.ceil(this.compras.length/this.comprasPerPage)},combined_compras(){const r=this.compras.filter(x=>{const c=this.searchQuery.toLowerCase();return x.producto.toLowerCase().includes(c)}),e=(this.currentPage-1)*this.comprasPerPage,h=e+this.comprasPerPage;return r.slice(e,h)}},mounted(){this.fetchCompras()},methods:{async fetchCompras(){try{const r=await _.get("all_compras");this.compras=r.data}catch(r){console.error("Error fetching compras:",r)}},nextPage(){this.currentPage<this.totalPages&&this.currentPage++},prevPage(){this.currentPage>1&&this.currentPage--}}},P={class:"flex flex-col text-white w-full h-screen"},v={class:"flex justify-end my-4 mr-6"},C={class:"relative flex items-center mx-3"},k={class:"absolute right-3 top-2 text-gray-500"},N={class:"flex items-center"},B={class:"flex flex-col w-full h-full mt-4 bg-transparent"},L={class:"flex flex-row justify-between"},Q=t("h1",{class:"text-2xl font-bold mx-4"},"Lista de Compras",-1),V={class:"flex justify-between items-center mx-4 my-2 mr-6"},j={class:"flex items-center"},F={class:"text-white text-sm"},I={class:"w-full text-sm text-left mt-4 rtl:text-right text-gray-500 dark:text-gray-400"},M=t("thead",{class:"border-b-2 text-xs text-white uppercase dark:bg-gray-700 dark:text-gray-400"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3"},"Producto"),t("th",{scope:"col",class:"px-6 py-3"},"Cantidad"),t("th",{scope:"col",class:"px-6 py-3"},"Importe (€)")])],-1),A={scope:"row",class:"flex items-center px-6 py-4 text-gray-100 whitespace-nowrap dark:text-white"},D={class:"font-bold text-lg text-100"},E={class:"px-6 py-4"},T={class:"font-bold text-lg text-100"},S={class:"px-6 py-4"},U={class:"font-bold text-xl text-100"};function q(r,e,h,x,c,a){const l=u("font-awesome-icon");return i(),d("main",P,[t("nav",v,[t("div",C,[g(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>c.searchQuery=s),type:"text",class:"border-2 border-resaltar bg-white h-10 px-5 pr-10 rounded-lg text-sm focus:outline-none text-gray-700",placeholder:"Buscar..."},null,512),[[f,c.searchQuery]]),t("button",k,[o(l,{icon:"magnifying-glass"})])]),t("div",N,[o(l,{icon:"bell",class:"w-6 h-6"})])]),t("section",B,[t("div",L,[Q,t("div",V,[t("div",j,[t("button",{onClick:e[1]||(e[1]=(...s)=>a.prevPage&&a.prevPage(...s)),class:"w-8 h-8 text-center text-resaltar"},[o(l,{icon:"circle-left",class:"w-6 h-6"})]),t("button",{onClick:e[2]||(e[2]=(...s)=>a.nextPage&&a.nextPage(...s)),class:"w-8 h-8 text-resaltar"},[o(l,{icon:"circle-right",class:"w-6 h-6"})])]),t("div",F," Página "+n(c.currentPage)+" de "+n(a.totalPages),1)])]),t("div",null,[t("table",I,[M,t("tbody",null,[(i(!0),d(y,null,w(a.combined_compras,(s,H)=>(i(),d("tr",{class:"dark:bg-gray-800 text-white",key:s.id},[t("th",A,[t("div",D,n(s.producto),1)]),t("td",E,[t("div",T,n(s.cantidad),1)]),t("td",S,[t("div",U,n(s.importe.toFixed(2)),1)])]))),128))])])])])])}const z=m(b,[["render",q]]),G={class:"flex flex-row bg-gray-700 h-full"},O={__name:"ComprasView",setup(r){return(e,h)=>(i(),d("div",G,[o(p,{activeNavAdmin:"Compras"}),o(z)]))}};export{O as default};
