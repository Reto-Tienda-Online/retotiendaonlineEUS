import{N as U}from"./AdminNavBar-jw3LCUVj.js";import{r as x,o as i,c as d,b as e,t as c,h as f,F as b,a as v,d as u,f as n,v as p,e as g,J as w,g as m,m as _,q as y,i as h}from"./index-T2RBepq2.js";const P={key:0,class:"flex items-center p-4 mb-4 text-sm text-green-800 rounded-lg bg-green-50 dark:bg-gray-800 dark:text-green-400",role:"alert"},D=e("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1),k=e("span",{class:"sr-only"},"Info",-1),N={class:"font-medium"},C={key:1,class:"flex items-center p-4 mb-4 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400",role:"alert"},A=e("svg",{class:"flex-shrink-0 inline w-4 h-4 me-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"})],-1),M={class:"font-medium"},O={__name:"AdminAlert",setup(r){const s=x(""),t=x("");return(l,o)=>(i(),d(b,null,[s.value?(i(),d("div",P,[D,k,e("span",N,c(s.value),1)])):f("",!0),t.value?(i(),d("div",C,[A,e("span",M,c(t.value),1)])):f("",!0)],64))}},V={class:"flex justify-end my-4 mr-6"},$={class:"relative flex items-center mx-3"},q={class:"absolute right-3 top-2 text-gray-500"},E={class:"flex items-center"},B={class:"flex flex-col w-full h-full mt-4 bg-transparent"},L={class:"flex flex-row"},T=e("h1",{class:"text-2xl font-bold mx-4"},"Lista de Usuarios",-1),Z={class:"flex justify-end flex-row ml-auto space-x-2 mx-4 items-center"},j={class:"flex justify-between items-center mx-4 my-2"},z={class:"flex items-center"},F={class:"text-white text-sm"},I={key:0,class:"fixed top-[12%] right-[45%] translate-x-1/2 transalte-y-1/2 bg-gray-300 px-5 py-5 shadow-md rounded-lg border-2"},S={class:"text-black text-center"},H=e("h1",{class:"my-4 text-xl font-bold"},"Nuevo Usuario",-1),Q={class:"flex flex-row text-left"},J={class:"mb-4 mx-2"},R=e("label",{for:"newUserName",class:"text-sm text-gray-600 font-bold"},"Nombre:",-1),G={class:"mb-4"},K=e("label",{for:"newUserApellido",class:"text-sm text-gray-600 font-bold"},"Apellido:",-1),W={class:"mb-4 text-left"},X=e("label",{for:"newUserEmail",class:"text-sm text-gray-600 font-bold"},"Correo:",-1),Y={class:"mb-4 text-left"},ee=e("label",{for:"newUserPassword",class:"text-sm text-gray-600 font-bold"},"Contraseña:",-1),se={for:"newUserAdmin",class:"flex items-center my-2 text-sm text-gray-600 font-bold"},te=e("button",{type:"submit",class:"w-full bg-resaltar text-white text-lg my-2 py-2 px-4 rounded"}," Crear Usuario ",-1),oe={class:"w-full text-sm text-left mt-4 rtl:text-right text-gray-500 dark:text-gray-400"},re=e("thead",{class:"border-b-2 text-xs text-white uppercase dark:bg-gray-700 dark:text-gray-400"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"}," Nombre y Email "),e("th",{scope:"col",class:"px-6 py-3"}," Admin "),e("th",{scope:"col",class:"px-6 py-3"}," Action ")])],-1),ae={scope:"row",class:"flex items-center px-6 py-4 text-gray-100 whitespace-nowrap dark:text-white"},le={class:"ps-3"},ne={class:"text-base font-semibold"},ie={class:"font-normal text-gray-300"},de={class:"px-6 py-4"},ue={class:"flex items-center"},pe={class:"flex flex-row justify-center px-6 py-4"},ce=["onClick"],me={key:0,class:"fixed top-[12%] right-[45%] translate-x-1/2 transalte-y-1/2 bg-gray-300 px-5 py-5 shadow-md rounded-lg border-2"},fe={class:"text-black text-center"},he=e("h1",{class:"my-4 text-xl font-bold"},"Actualizar Usuario",-1),be={class:"flex flex-row text-left"},xe={class:"mb-4 mx-2"},ge=e("label",{for:"newUserName",class:"text-sm text-gray-600 font-bold"},"Nombre:",-1),we={class:"mb-4"},ye=e("label",{for:"newUserApellido",class:"text-sm text-gray-600 font-bold"},"Apellido:",-1),Ue={class:"mb-4 text-left"},ve=e("label",{for:"newUserEmail",class:"text-sm text-gray-600 font-bold"},"Email:",-1),_e={for:"newUserAdmin",class:"flex items-center my-2 text-sm text-gray-600 font-bold"},Pe=e("button",{type:"submit",class:"w-full bg-resaltar text-white text-lg py-2 px-4 rounded"}," Actualizar ",-1),De=["onClick"],ke={key:1,class:"fixed top-1/4 right-[45%] translate-x-1/2 transalte-y-1/2 bg-gray-300 px-5 py-5 rounded-lg cursor-pointer"},Ne={class:"text-black text-center"},Ce={class:"py-3"},Ae={class:"font-bold"},Me={data(){return{users:[],isPopupOpen:!1,isDeletePopupOpen:!1,isNewUserPopupOpen:!1,formData:{nombre:"",apellido:"",correo:"",admin:!1},newUserData:{nombre:"",apellido:"",correo:"",contrasena:"",admin:!1},currentPage:1,usersPerPage:6,items:[],searchQuery:"",successMessage:"",errorMessage:""}},computed:{totalPages(){return Math.ceil(this.users.length/this.usersPerPage)},combinedUsers(){const r=this.users.filter(l=>{const o=this.searchQuery.toLowerCase();return l.nombre.toLowerCase().includes(o)||l.apellido.toLowerCase().includes(o)||l.correo.toLowerCase().includes(o)}),s=(this.currentPage-1)*this.usersPerPage,t=s+this.usersPerPage;return r.slice(s,t)}},mounted(){this.fetchUsers()},methods:{async fetchUsers(){try{const r=await h.get("/all_usuarios");this.users=r.data}catch(r){console.error("Error fetching users:",r)}},openPopup(r){this.formData={id:r.id,nombre:r.nombre,apellido:r.apellido,correo:r.correo,contrasena:r.contrasena,admin:r.admin},this.isPopupOpen=!0},closePopup(){this.isPopupOpen=!1},submitForm(){const{id:r,...s}=this.formData;h.put(`/usuarios/${this.formData.id}`,s).then(t=>{this.fetchUsers(),this.closePopup(),this.successMessage="Usuario actulizado con exíto"}).catch(t=>{console.error("Error al actualizar el usuario:",t)})},confirmDelete(r){this.userToDelete=r,this.isDeletePopupOpen=!0},closeDeletePopup(){this.isDeletePopupOpen=!1},deleteUser(){const r=this.userToDelete.id;h.delete(`/usuarios/${r}`).then(s=>{this.fetchUsers(),this.closeDeletePopup()}).catch(s=>{console.error("Error al eliminar el usuario:",s)})},openNewUserPopup(){this.isNewUserPopupOpen=!0},closeNewUserPopup(){this.isNewUserPopupOpen=!1},createNewUser(){h.post("/register",this.newUserData).then(r=>{this.fetchUsers(),this.closeNewUserPopup()}).catch(r=>{console.error("Error al crear el usuario:",r)})},nextPage(){this.currentPage<this.totalPages&&this.currentPage++},prevPage(){this.currentPage>1&&this.currentPage--}}},Oe=Object.assign(Me,{__name:"AdminUsuariosMain",setup(r){return(s,t)=>{const l=v("font-awesome-icon");return i(),d(b,null,[u(O,{successMessage:s.successMessage,errorMessage:s.errorMessage},null,8,["successMessage","errorMessage"]),e("main",{class:y(["flex flex-col text-white w-full h-screen",{"w-full h-full bg-auto bg-black opacity-100 cursor-pointer":s.isPopupOpen||s.isDeletePopupOpen||s.isNewUserPopupOpen}])},[e("nav",V,[e("div",$,[n(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>s.searchQuery=o),type:"text",class:"border-2 border-resaltar bg-white h-10 px-5 pr-10 rounded-lg text-sm focus:outline-none text-gray-700",placeholder:"Buscar..."},null,512),[[p,s.searchQuery]]),e("button",q,[u(l,{icon:"magnifying-glass"})])]),e("div",E,[u(l,{icon:"bell",class:"w-6 h-6"})])]),e("section",B,[e("div",L,[T,e("div",Z,[e("div",j,[e("div",z,[e("button",{onClick:t[1]||(t[1]=(...o)=>s.prevPage&&s.prevPage(...o)),class:"w-8 h-8 text-center text-resaltar"},[u(l,{icon:"circle-left",class:"w-6 h-6"})]),e("button",{onClick:t[2]||(t[2]=(...o)=>s.nextPage&&s.nextPage(...o)),class:"w-8 h-8 text-resaltar"},[u(l,{icon:"circle-right",class:"w-6 h-6"})])]),e("div",F," Página "+c(s.currentPage)+" de "+c(s.totalPages),1)]),e("button",{onClick:t[3]||(t[3]=o=>s.openNewUserPopup()),class:"text-md rounded-md px-4 py-2 mx-8 bg-resaltar font-bold"}," + USUARIO ")])]),s.isNewUserPopupOpen?(i(),d("div",I,[e("div",S,[e("span",{onClick:t[4]||(t[4]=(...o)=>s.closeNewUserPopup&&s.closeNewUserPopup(...o)),class:"absolute -top-14 right-2 rounded-full border-2 px-2 py-0 pointer-events-auto bg-gray-400 text-black text-2xl font-bold"},"×"),e("form",{onSubmit:t[10]||(t[10]=g((...o)=>s.createNewUser&&s.createNewUser(...o),["prevent"])),class:"max-w-md mx-auto mt-8"},[H,e("div",Q,[e("div",J,[R,n(e("input",{type:"text",id:"newUserName","onUpdate:modelValue":t[5]||(t[5]=o=>s.newUserData.nombre=o),required:"",class:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:border-primary"},null,512),[[p,s.newUserData.nombre]])]),e("div",G,[K,n(e("input",{type:"text",id:"newUserApellido","onUpdate:modelValue":t[6]||(t[6]=o=>s.newUserData.apellido=o),required:"",class:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:border-primary"},null,512),[[p,s.newUserData.apellido]])])]),e("div",W,[X,n(e("input",{type:"email",id:"newUserEmail","onUpdate:modelValue":t[7]||(t[7]=o=>s.newUserData.correo=o),required:"",class:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:border-primary"},null,512),[[p,s.newUserData.correo]])]),e("div",Y,[ee,n(e("input",{type:"password",id:"newUserPassword","onUpdate:modelValue":t[8]||(t[8]=o=>s.newUserData.contrasena=o),required:"",class:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:border-primary"},null,512),[[p,s.newUserData.contrasena]])]),e("label",se,[n(e("input",{type:"checkbox",id:"newUserAdmin","onUpdate:modelValue":t[9]||(t[9]=o=>s.newUserData.admin=o),class:"mr-2 px-1 py-2"},null,512),[[w,s.newUserData.admin]]),m(" Admin ")]),te],32)])])):f("",!0),e("div",null,[e("table",oe,[re,e("tbody",null,[(i(!0),d(b,null,_(s.combinedUsers,(o,$e)=>(i(),d("tr",{class:"dark:bg-gray-800 text-white",key:o.id},[e("th",ae,[e("div",le,[e("div",ne,c(o.nombre)+" "+c(o.apellido),1),e("div",ie,c(o.correo),1)])]),e("td",de,[e("div",ue,[e("div",{class:y(["h-2.5 w-2.5 rounded-full bg-green-500 me-2",{"bg-green-500":o.admin,"bg-red-500":!o.admin}])},null,2),m(" Admin ")])]),e("td",pe,[e("button",{onClick:a=>s.openPopup(o),class:"text-blue-500 rounded"},[u(l,{icon:"pen-to-square",class:"w-6 h-6 hover:-translate-y-2"})],8,ce),s.isPopupOpen?(i(),d("div",me,[e("div",fe,[e("span",{onClick:t[11]||(t[11]=(...a)=>s.closePopup&&s.closePopup(...a)),class:"absolute -top-14 right-2 rounded-full border-2 px-2 py-0 pointer-events-auto bg-gray-400 text-black text-2xl font-bold"},"×"),e("form",{onSubmit:t[16]||(t[16]=g((...a)=>s.submitForm&&s.submitForm(...a),["prevent"])),class:"max-w-md mx-auto mt-8"},[he,e("div",be,[e("div",xe,[ge,n(e("input",{type:"text",id:"name","onUpdate:modelValue":t[12]||(t[12]=a=>s.formData.nombre=a),required:"",class:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:border-primary"},null,512),[[p,s.formData.nombre]])]),e("div",we,[ye,n(e("input",{type:"text",id:"apellido","onUpdate:modelValue":t[13]||(t[13]=a=>s.formData.apellido=a),required:"",class:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:border-primary"},null,512),[[p,s.formData.apellido]])])]),e("div",Ue,[ve,n(e("input",{type:"email",id:"email","onUpdate:modelValue":t[14]||(t[14]=a=>s.formData.correo=a),required:"",class:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:border-primary"},null,512),[[p,s.formData.correo]])]),e("label",_e,[n(e("input",{type:"checkbox",id:"admin","onUpdate:modelValue":t[15]||(t[15]=a=>s.formData.admin=a),class:"mr-2 px-1 py-2"},null,512),[[w,s.formData.admin]]),m(" Admin ")]),Pe],32)])])):f("",!0),e("button",{onClick:a=>s.confirmDelete(o),class:"font-medium mx-1 text-red-600 dark:text-blue-500"},[u(l,{icon:"trash",class:"w-6 h-6 hover:-translate-y-2"})],8,De),s.isDeletePopupOpen?(i(),d("div",ke,[e("div",Ne,[e("h2",Ce,[m("¿Seguro que quieres eliminar el usuario "),e("span",Ae,c(s.userToDelete.nombre),1),m("? ")]),e("button",{onClick:t[17]||(t[17]=(...a)=>s.closeDeletePopup&&s.closeDeletePopup(...a)),class:"bg-red-500 text-white py-2 mx-1 px-4 rounded"},"Cancelar "),e("button",{onClick:t[18]||(t[18]=(...a)=>s.deleteUser&&s.deleteUser(...a)),class:"bg-green-500 text-white py-2 mx-1 px-4 rounded"},"Confirmar ")])])):f("",!0)])]))),128))])])])])],2)],64)}}}),Ve={class:"flex flex-row bg-gray-700 h-full"},Be={__name:"UsuariosView",setup(r){return(s,t)=>(i(),d("div",Ve,[u(U,{activeNavAdmin:"Usuarios"}),u(Oe)]))}};export{Be as default};
