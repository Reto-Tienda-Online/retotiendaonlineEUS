import{N as x}from"./AdminNavBar-jw3LCUVj.js";import{a as h,o as i,c as d,b as e,f,v as _,d as a,t as l,w as m,g as u,F as g,m as y,h as P,i as p}from"./index-T2RBepq2.js";const b={class:"flex flex-col text-white w-full h-screen"},w={class:"flex justify-end my-4 mr-6"},v={class:"relative flex items-center mx-3"},k={class:"absolute right-3 top-2 text-gray-500"},D={class:"flex items-center"},C={class:"flex flex-col w-full h-full mt-4 bg-transparent"},N={class:"flex flex-row"},I=e("h1",{class:"text-2xl font-bold mx-4"},"Lista de Productos",-1),V={class:"flex justify-end flex-row ml-auto space-x-2 mx-4 items-center"},$={class:"flex justify-between items-center mx-4 my-2"},j={class:"flex items-center"},L={class:"text-white text-sm"},A={class:"w-full text-sm text-left mt-4 rtl:text-right text-gray-500 dark:text-gray-400"},B=e("thead",{class:"border-b-2 text-xs text-white uppercase dark:bg-gray-700 dark:text-gray-400"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"}," Nombre "),e("th",{scope:"col",class:"px-6 py-3"}," Plataforma "),e("th",{scope:"col",class:"px-6 py-3"}," Precio(€) "),e("th",{scope:"col",class:"px-6 py-3"}," Action ")])],-1),E={scope:"row",class:"flex items-center px-6 py-4 text-gray-100 whitespace-nowrap dark:text-white"},Q={class:"font-bold text-md text-white"},T={class:"px-6 py-4"},q={class:"font-normal text-gray-300 text-pretty"},M={class:"px-6 py-4"},O={class:"font-normal text-gray-300 text-pretty"},F={class:"justify-center px-6 py-4"},S=["onClick"],U={key:0,class:"fixed top-1/4 right-[45%] translate-x-1/2 transalte-y-1/2 bg-gray-300 px-5 py-5 rounded-lg cursor-pointer"},R={class:"text-black text-center"},z={class:"py-3"},G={class:"font-bold"},H={data(){return{products:[],popupDelete:!1,currentPage:1,productsPerPage:6,items:[],searchQuery:""}},computed:{totalPages(){return Math.ceil(this.products.length/this.productsPerPage)},combined_products(){const r=this.products.filter(n=>{const c=this.searchQuery.toLowerCase();return n.producto.toLowerCase().includes(c)||n.nombreplataforma.toLowerCase().includes(c)}),t=(this.currentPage-1)*this.productsPerPage,o=t+this.productsPerPage;return r.slice(t,o)}},mounted(){this.fetchProducts()},methods:{async fetchProducts(){try{const r=await p.get("/all_productos");this.products=r.data}catch(r){console.error("Error fetching products:",r)}},openDeletePopup(r){this.productID=r.id,this.productName=r.producto,this.popupDelete=!0,console.log(this.productID),p.delete(`/productos/${this.productID}`).then(t=>{this.fetchProducts(),this.popupDelete=!1,console.log("Producto eliminado correctamente")}).catch(t=>{console.error("Error al eliminar el producto:",t)})},closeDeletePopup(){this.popupDelete=!1},deleteProduct(r){p.delete(`/delete_producto/${r}`).then(t=>{this.fetchProducts(),this.popupDelete=!1,console.log("Producto eliminado correctamente")}).catch(t=>{console.error("Error al eliminar el producto:",t)})},nextPage(){this.currentPage<this.totalPages&&this.currentPage++},prevPage(){this.currentPage>1&&this.currentPage--}}},J=Object.assign(H,{__name:"AdminProductosMain",setup(r){return(t,o)=>{const n=h("font-awesome-icon"),c=h("router-link");return i(),d("main",b,[e("nav",w,[e("div",v,[f(e("input",{"onUpdate:modelValue":o[0]||(o[0]=s=>t.searchQuery=s),type:"text",class:"border-2 border-resaltar bg-white h-10 px-5 pr-10 rounded-lg text-sm focus:outline-none text-gray-700",placeholder:"Buscar..."},null,512),[[_,t.searchQuery]]),e("button",k,[a(n,{icon:"magnifying-glass"})])]),e("div",D,[a(n,{icon:"bell",class:"w-6 h-6"})])]),e("section",C,[e("div",N,[I,e("div",V,[e("div",$,[e("div",j,[e("button",{onClick:o[1]||(o[1]=(...s)=>t.prevPage&&t.prevPage(...s)),class:"w-8 h-8 text-center text-resaltar"},[a(n,{icon:"circle-left",class:"w-6 h-6"})]),e("button",{onClick:o[2]||(o[2]=(...s)=>t.nextPage&&t.nextPage(...s)),class:"w-8 h-8 text-resaltar"},[a(n,{icon:"circle-right",class:"w-6 h-6"})])]),e("div",L," Página "+l(t.currentPage)+" de "+l(t.totalPages),1)]),a(c,{to:{name:"admin_nuevo_producto"},class:"text-md rounded-md px-4 py-2 mx-8 bg-resaltar font-bold"},{default:m(()=>[u(" + PRODUCTO ")]),_:1})])]),e("div",null,[e("table",A,[B,e("tbody",null,[(i(!0),d(g,null,y(t.combined_products,(s,W)=>(i(),d("tr",{class:"dark:bg-gray-800 text-white",key:s.id},[e("th",E,[e("div",Q,l(s.producto),1)]),e("td",T,[e("div",q,l(s.nombreplataforma),1)]),e("td",M,[e("div",O,l(s.precio_unitario),1)]),e("td",F,[a(c,{to:{name:"adminProductDetail",params:{name:s.producto}},class:"font-medium mx-1 text-blue-600 dark:text-blue-500"},{default:m(()=>[a(n,{icon:"pen-to-square",class:"w-6 h-6 hover:-translate-y-2"})]),_:2},1032,["to"]),e("button",{onClick:X=>t.openDeletePopup(s),class:"font-medium mx-1 text-red-600 dark:text-blue-500"},[a(n,{icon:"trash",class:"w-6 h-6 hover:-translate-y-2"})],8,S)])]))),128))])]),t.popupDelete?(i(),d("div",U,[e("div",R,[e("h2",z,[u("¿Seguro que quieres eliminar el usuario "),e("span",G,l(t.productName),1),u("? ")]),e("button",{onClick:o[3]||(o[3]=(...s)=>t.closeDeletePopup&&t.closeDeletePopup(...s)),class:"bg-red-500 text-white py-2 mx-1 px-4 rounded"},"Cancelar "),e("button",{onClick:o[4]||(o[4]=s=>t.deleteProduct(t.productID)),class:"bg-green-500 text-white py-2 mx-1 px-4 rounded"},"Confirmar ")])])):P("",!0)])])])}}}),K={class:"flex flex-row bg-gray-700 h-full"},ee={__name:"ProductosView",setup(r){return(t,o)=>(i(),d("div",K,[a(x,{activeNavAdmin:"Productos"}),a(J)]))}};export{ee as default};
