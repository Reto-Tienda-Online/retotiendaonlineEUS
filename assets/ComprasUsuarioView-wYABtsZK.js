import{a as p,o as l,c as i,b as e,f as u,v as g,d as c,t as n,F as h,m,i as d,x,s as _}from"./index-T2RBepq2.js";const f={class:"flex flex-col text-white w-full h-screen"},y={class:"flex justify-end my-4 mr-6"},w={class:"relative flex items-center mx-3"},b={"aria-label":"Search",class:"absolute right-3 top-2 text-gray-500"},v={class:"flex items-center"},P={class:"flex flex-col w-full h-full mt-4 bg-transparent"},k={class:"flex flex-row"},C=e("h1",{class:"text-2xl font-bold mx-4"},"Erosketako zerrenda",-1),D={class:"flex justify-end flex-row ml-auto space-x-2 mx-4 items-center"},S={class:"flex justify-between items-center mx-4 my-2"},j={class:"flex items-center"},I={class:"text-white text-sm"},T={class:"w-full text-sm text-left mt-4 rtl:text-right text-gray-500 dark:text-gray-400"},J=e("thead",{class:"border-b-2 text-xs text-white uppercase dark:bg-gray-700 dark:text-gray-400"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"}," Jokoa "),e("th",{scope:"col",class:"px-6 py-3"}," Kantitatea "),e("th",{scope:"col",class:"px-6 py-3"}," Zenbatekoa(â‚¬) "),e("th",{scope:"col",class:"px-6 py-3"}," Data ")])],-1),$={scope:"row",class:"flex items-center px-6 py-4 text-gray-100 whitespace-nowrap dark:text-white"},B=["onClick"],E={class:"px-6 py-4"},N={class:"font-normal text-gray-300 text-pretty"},O={class:"px-6 py-4"},Q={class:"font-normal text-gray-300 text-pretty"},V={class:"px-6 py-4"},F={class:"font-normal text-gray-300 text-pretty"},L={data(){return{compras:[],currentPage:1,comprasPerPage:6,searchQuery:""}},computed:{totalPages(){return Math.ceil(this.compras.length/this.comprasPerPage)},combined_compras(){const o=this.compras.filter(r=>{const s=this.searchQuery.toLowerCase();return r.producto.toLowerCase().includes(s)}),t=(this.currentPage-1)*this.comprasPerPage,a=t+this.comprasPerPage;return o.slice(t,a)}},mounted(){this.fetchCompras()},methods:{async fetchCompras(){try{const o=JSON.parse(localStorage.getItem("usuario")).id,t=await d.get(`compras_usuario/${o}`);this.compras=t.data}catch(o){console.error("Error fetching compras:",o)}},async goToDetalleJuego(o){try{const a=(await d.get(`all_productos?id=${o}`)).data[0];localStorage.setItem("juegoDetalle",JSON.stringify(a)),x.push("juegoDetalle")}catch(t){console.error("Error fetching juego:",t)}},converToDate(o){return new Date(o).toISOString().substring(0,10)},nextPage(){this.currentPage<this.totalPages&&this.currentPage++},prevPage(){this.currentPage>1&&this.currentPage--}}},U=Object.assign(L,{__name:"ComprasUsuario",setup(o){return(t,a)=>{const r=p("font-awesome-icon");return l(),i("main",f,[e("nav",y,[e("div",w,[u(e("input",{"onUpdate:modelValue":a[0]||(a[0]=s=>t.searchQuery=s),type:"text",class:"border-2 border-resaltar bg-white h-10 px-5 pr-10 rounded-lg text-sm focus:outline-none text-gray-700",placeholder:"Buscar..."},null,512),[[g,t.searchQuery]]),e("button",b,[c(r,{icon:"magnifying-glass"})])]),e("div",v,[c(r,{icon:"bell",class:"w-6 h-6"})])]),e("section",P,[e("div",k,[C,e("div",D,[e("div",S,[e("div",j,[e("button",{"aria-label":"Anterior",onClick:a[1]||(a[1]=(...s)=>t.prevPage&&t.prevPage(...s)),class:"w-8 h-8 text-center text-resaltar"},[c(r,{icon:"circle-left",class:"w-6 h-6"})]),e("button",{"aria-label":"Siguiente",onClick:a[2]||(a[2]=(...s)=>t.nextPage&&t.nextPage(...s)),class:"w-8 h-8 text-resaltar"},[c(r,{icon:"circle-right",class:"w-6 h-6"})])]),e("div",I,n(t.totalPages)+" (e)tik "+n(t.currentPage)+" orrialdea ",1)])])]),e("div",null,[e("table",T,[J,e("tbody",null,[(l(!0),i(h,null,m(t.combined_compras,(s,M)=>(l(),i("tr",{class:"dark:bg-gray-800 text-white",key:s.id},[e("th",$,[e("div",{onClick:z=>t.goToDetalleJuego(s.id_producto),class:"font-bold text-md text-white hover:scale-105 cursor-pointer"},n(s.producto),9,B)]),e("td",E,[e("div",N,n(s.cantidad),1)]),e("td",O,[e("div",Q,n(s.importe.toFixed(2)),1)]),e("td",V,[e("div",F,n(t.converToDate(s.fechacompra)),1)])]))),128))])])])])])}}}),K={__name:"ComprasUsuarioView",setup(o){return(t,a)=>(l(),i(h,null,[c(_),c(U)],64))}};export{K as default};
