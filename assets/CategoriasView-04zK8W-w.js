import{N as f}from"./AdminNavBar-jw3LCUVj.js";import{a as x,o as i,c as n,b as e,f as c,v as p,d as l,t as u,e as h,g as d,h as m,F as b,m as C,q as w,i as g}from"./index-T2RBepq2.js";const _={class:"flex justify-end my-4 mr-6"},v={class:"relative flex items-center mx-3"},P={class:"absolute right-3 top-2 text-gray-500"},k={class:"flex items-center"},M={class:"flex flex-col w-full h-full mt-4 bg-transparent"},U={class:"flex flex-row"},D=e("h1",{class:"text-2xl font-bold mx-4"},"Lista de Categorias",-1),N={class:"flex justify-end flex-row ml-auto space-x-2 mx-4 items-center"},$={class:"flex justify-between items-center mx-4 my-2"},V={class:"flex items-center"},q={class:"text-white text-sm"},A={key:0,class:"fixed top-[12%] right-[45%] translate-x-1/2 transalte-y-1/2 bg-gray-300 px-5 py-5 shadow-md rounded-lg border-2"},O={class:"text-black text-center"},T=e("h1",{class:"my-4 text-xl font-bold"},"Nueva Categoría",-1),E={class:"mb-4 text-left"},j={class:"text-sm text-gray-600 font-bold"},z={class:"mb-4 text-left"},B={class:"text-sm text-gray-600 font-bold"},L=e("button",{type:"submit",class:"w-full bg-resaltar text-white text-lg my-2 py-2 px-4 rounded"}," Crear Categoría ",-1),Q={key:1,class:"fixed top-1/4 right-[45%] translate-x-1/2 transalte-y-1/2 bg-gray-300 px-5 py-5 rounded-lg cursor-pointer"},S={class:"text-black text-center"},I={class:"py-3"},F={class:"font-bold"},G={key:2,class:"fixed top-[12%] right-[45%] translate-x-1/2 transalte-y-1/2 bg-gray-300 px-5 py-5 shadow-md rounded-lg border-2"},R={class:"text-black text-center"},H=e("h1",{class:"my-4 text-xl font-bold"},"Actualizar Categoría",-1),J={class:"mb-4 text-left"},K={class:"text-sm text-gray-600 font-bold"},W={class:"mb-4 text-left"},X={class:"text-sm text-gray-600 font-bold"},Y=e("button",{type:"submit",class:"w-full bg-resaltar text-white text-lg py-2 px-4 rounded"}," Actualizar ",-1),Z={class:"w-full text-sm text-left mt-4 rtl:text-right text-gray-500 dark:text-gray-400"},ee=e("thead",{class:"border-b-2 text-xs text-white uppercase dark:bg-gray-700 dark:text-gray-400"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"}," Categoría "),e("th",{scope:"col",class:"px-6 py-3"}," Descripción "),e("th",{scope:"col",class:"px-6 py-3"}," Action ")])],-1),te={scope:"row",class:"flex items-center px-6 py-4 text-gray-100 whitespace-nowrap dark:text-white"},oe={class:"font-bold text-md text-white"},se={class:"px-6 py-4"},ae={class:"font-normal text-gray-300 text-pretty"},re={class:"justify-center px-6 py-4"},le=["onClick"],ie=["onClick"],ne={data(){return{categories:[],newCategoryModal:!1,updateCategoryModal:!1,isDeletePopupOpen:!1,newCategory:{categoria:"",descripcion:""},formUpdateCategory:{id:"",categoria:"",descripcion:""},currentPage:1,categoriesPerPage:6,searchQuery:""}},computed:{totalPages(){return Math.ceil(this.categories.length/this.categoriesPerPage)},combinedCategories(){const a=this.categories.filter(r=>{const s=this.searchQuery.toLowerCase();return r.categoria.toLowerCase().includes(s)}),t=(this.currentPage-1)*this.categoriesPerPage,o=t+this.categoriesPerPage;return a.slice(t,o)}},mounted(){this.fetchCategories()},methods:{async fetchCategories(){try{const a=await g.get("/all_categorias");this.categories=a.data}catch(a){console.error("Error fetching categories:",a)}},openNewCategoryModal(){this.newCategoryModal=!0},closeCategoryModal(){this.newCategoryModal=!1},submitNewCategory(){g.post("/categorias",this.newCategory).then(a=>{this.fetchCategories(),this.closeCategoryModal()}).catch(a=>{console.error("Error al crear el categoria:",a)})},openUpdatePopup(a){this.formUpdateCategory={id:a.id,categoria:a.categoria,descripcion:a.descripcion},this.updateCategoryModal=!0},closeUpdatePopup(){this.updateCategoryModal=!1},submit_update(){console.log(this.formUpdateCategory);const{id:a,...t}=this.formUpdateCategory;g.put(`/categorias/${this.formUpdateCategory.id}`,t).then(o=>{this.fetchCategories(),this.closeUpdatePopup()}).catch(o=>{console.error("Error al actualizar el categoria:",o)})},deleteCategoryModal_function(a){this.categoryToDelete=a,this.isDeletePopupOpen=!0},closeDeletePopup(){this.isDeletePopupOpen=!1},deleteCategory(){const a=this.categoryToDelete.id;g.delete(`/categorias/${a}`).then(t=>{this.fetchCategories(),this.closeDeletePopup()}).catch(t=>{console.error("Error al eliminar el Categoria:",t)})},nextPage(){this.currentPage<this.totalPages&&this.currentPage++},prevPage(){this.currentPage>1&&this.currentPage--}}},de=Object.assign(ne,{__name:"AdminCategoriasMain",setup(a){return(t,o)=>{const r=x("font-awesome-icon");return i(),n("main",{class:w(["flex flex-col text-white w-full h-screen",{"w-full h-full bg-auto bg-black opacity-100 cursor-pointer":t.newCategoryModal||t.updateCategoryModal||t.isDeletePopupOpen}])},[e("nav",_,[e("div",v,[c(e("input",{"onUpdate:modelValue":o[0]||(o[0]=s=>t.searchQuery=s),type:"text",class:"border-2 border-resaltar bg-white h-10 px-5 pr-10 rounded-lg text-sm focus:outline-none text-gray-700",placeholder:"Buscar..."},null,512),[[p,t.searchQuery]]),e("button",P,[l(r,{icon:"magnifying-glass"})])]),e("div",k,[l(r,{icon:"bell",class:"w-6 h-6"})])]),e("section",M,[e("div",U,[D,e("div",N,[e("div",$,[e("div",V,[e("button",{onClick:o[1]||(o[1]=(...s)=>t.prevPage&&t.prevPage(...s)),class:"w-8 h-8 text-center text-resaltar"},[l(r,{icon:"circle-left",class:"w-6 h-6"})]),e("button",{onClick:o[2]||(o[2]=(...s)=>t.nextPage&&t.nextPage(...s)),class:"w-8 h-8 text-resaltar"},[l(r,{icon:"circle-right",class:"w-6 h-6"})])]),e("div",q," Página "+u(t.currentPage)+" de "+u(t.totalPages),1)]),e("button",{onClick:o[3]||(o[3]=s=>t.openNewCategoryModal()),class:"text-md rounded-md px-4 py-2 mx-8 bg-resaltar font-bold"}," + CATEGORÍA ")])]),e("div",null,[t.newCategoryModal?(i(),n("div",A,[e("div",O,[e("span",{onClick:o[4]||(o[4]=s=>t.closeCategoryModal()),class:"absolute -top-14 right-2 rounded-full border-2 px-2 py-0 pointer-events-auto bg-gray-400 text-black text-2xl font-bold"},"×"),e("form",{onSubmit:o[7]||(o[7]=h((...s)=>t.submitNewCategory&&t.submitNewCategory(...s),["prevent"])),class:"max-w-md mx-auto mt-8"},[T,e("div",E,[e("label",j,[d("Nombre: "),c(e("input",{type:"text","onUpdate:modelValue":o[5]||(o[5]=s=>t.newCategory.categoria=s),required:"",class:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:border-primary"},null,512),[[p,t.newCategory.categoria]])])]),e("div",z,[e("label",B,[d("Descripción: "),c(e("textarea",{"onUpdate:modelValue":o[6]||(o[6]=s=>t.newCategory.descripcion=s),required:"",class:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:border-primary"},null,512),[[p,t.newCategory.descripcion]])])]),L],32)])])):m("",!0),t.isDeletePopupOpen?(i(),n("div",Q,[e("div",S,[e("h2",I,[d("¿Seguro que quieres eliminar el usuario "),e("span",F,u(t.categoryToDelete.categoria),1),d("? ")]),e("button",{onClick:o[8]||(o[8]=s=>t.closeDeletePopup()),class:"bg-red-500 text-white py-2 mx-1 px-4 rounded"},"Cancelar "),e("button",{onClick:o[9]||(o[9]=s=>t.deleteCategory()),class:"bg-green-500 text-white py-2 mx-1 px-4 rounded"},"Confirmar ")])])):m("",!0),t.updateCategoryModal?(i(),n("div",G,[e("div",R,[e("span",{onClick:o[10]||(o[10]=s=>t.closeUpdatePopup()),class:"absolute -top-14 right-2 rounded-full border-2 px-2 py-0 pointer-events-auto bg-gray-400 text-black text-2xl font-bold"},"×"),e("form",{onSubmit:o[13]||(o[13]=h((...s)=>t.submit_update&&t.submit_update(...s),["prevent"])),class:"max-w-md mx-auto mt-8"},[H,e("div",J,[e("label",K,[d("Nombre: "),c(e("input",{type:"text","onUpdate:modelValue":o[11]||(o[11]=s=>t.formUpdateCategory.categoria=s),required:"",class:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:border-primary"},null,512),[[p,t.formUpdateCategory.categoria]])])]),e("div",W,[e("label",X,[d("Descripción: "),c(e("textarea",{"onUpdate:modelValue":o[12]||(o[12]=s=>t.formUpdateCategory.descripcion=s),required:"",class:"w-full px-4 py-2 mt-2 border rounded-md focus:outline-none focus:border-primary"},null,512),[[p,t.formUpdateCategory.descripcion]])])]),Y],32)])])):m("",!0),e("table",Z,[ee,e("tbody",null,[(i(!0),n(b,null,C(t.combinedCategories,(s,pe)=>(i(),n("tr",{class:"dark:bg-gray-800 text-white",key:s.id},[e("th",te,[e("div",oe,u(s.categoria),1)]),e("td",se,[e("div",ae,u(s.descripcion.substring(0,25))+"...",1)]),e("td",re,[e("button",{onClick:y=>t.openUpdatePopup(s),class:"font-medium mx-1 text-blue-600 dark:text-blue-500"},[l(r,{icon:"pen-to-square",class:"w-6 h-6 hover:-translate-y-2"})],8,le),e("button",{onClick:y=>t.deleteCategoryModal_function(s),class:"font-medium mx-1 text-red-600 dark:text-blue-500"},[l(r,{icon:"trash",class:"w-6 h-6 hover:-translate-y-2"})],8,ie)])]))),128))])])])])],2)}}}),ce={class:"flex flex-row bg-gray-700 h-full"},me={__name:"CategoriasView",setup(a){return(t,o)=>(i(),n("div",ce,[l(f,{activeNavAdmin:"Categorias"}),l(de)]))}};export{me as default};
